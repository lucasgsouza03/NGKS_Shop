{% extends "base.html" %}
{% load widget_tweaks %}
{% block tittle %}
    Pedido #{{ order.pk }}
{% endblock %}

{% block pagina %}
    {% load bootstrap3 %}
    {% bootstrap_css %}

<div class="page-header" style="width: 50%;margin-left: 30%;">
    <h1> Pedido Nº {{ pedido.pk }} </h1><br>

<dl class="dl-horizontal" style="padding-right: 15%">
    <h2>Detalhes do pedido :</h2><br>
    <dt>Total R$ : </dt>
    <dd>{{ object.total|floatformat:"2" }}</dd>
    <dt>Situação :</dt>
    <dd>{{ object.get_status_display }}</dd>
    {% if object.get_status_display == "Aguardando Pagamento" %}
        {% if object.opcao_pagamento == "pagseguro" %}
            <div class="col-md-4 col-md-offset-3">
                <a href="{% url 'checkout:pagseguro_view' pedido.pk %} " class="btn btn-primary">Finalizar pagamento</a>
            </div>
        {% elif object.opcao_pagamento == "paypal" %}
            <div class="col-md-5">
                <a href="{% url 'checkout:paypal_view' pedido.pk %}" class="btn btn-primary">Finalizar pagamento</a>
            </div>
        {% endif %}
    {% endif %}
    <dt>Data</dt>
    <dd>{{ object.criado|date:"d/m/Y H:i" }}</dd>
    <dt>Meio de Pagamento :</dt>
    <dd style="text-transform: uppercase;">{{ object.opcao_pagamento}}</dd>
<br>

<h2>Itens do Pedido :</h2><br>
{% for item in object.items.all %}
        <dt>Produto :</dt>
        <dd>{{ item.produto }}</dd>
        <dt>Quantidade :</dt>
        <dd>{{ item.quantidade }}</dd>
        <dt>Preço :</dt>
        <dd>R$ {{ item.preco|floatformat:"2" }}</dd>
    </dl></div><br><br>
{% endfor %}
</center>
{% endblock %}
